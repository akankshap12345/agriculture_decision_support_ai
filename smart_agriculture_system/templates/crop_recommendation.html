<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Recommendation - Smart Agriculture System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <h1>ðŸŒ¾ Smart Agriculture System</h1>
                <p>AI-Powered Decision Support for Modern Farming</p>
            </div>
            <nav class="nav">
                <a href="/">Home</a>
                <a href="/crop-recommendation" class="active">Crop Recommendation</a>
                <a href="/yield-prediction">Yield Prediction</a>
                <a href="/weather-advisory">Weather Advisory</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Introduction -->
        <div class="card">
            <h2>ðŸŒ± Crop Recommendation System</h2>
            <p>
                Our AI-powered system analyzes your soil composition and environmental conditions 
                to recommend the most suitable crops for your farmland. Enter your field parameters 
                below to get personalized crop recommendations.
            </p>
        </div>

        <!-- Input Form -->
        <div class="card">
            <h2>Enter Field Parameters</h2>
            <form id="crop-form" onsubmit="handleCropRecommendation(event)">
                <!-- Soil Nutrients -->
                <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Soil Nutrients (NPK)</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="nitrogen">Nitrogen (N) - kg/ha</label>
                        <input type="number" id="nitrogen" name="nitrogen" 
                               min="0" max="200" step="0.1" required
                               placeholder="e.g., 90">
                        <small style="color: #666;">Typical range: 0-140 kg/ha</small>
                    </div>
                    <div class="form-group">
                        <label for="phosphorus">Phosphorus (P) - kg/ha</label>
                        <input type="number" id="phosphorus" name="phosphorus" 
                               min="0" max="150" step="0.1" required
                               placeholder="e.g., 42">
                        <small style="color: #666;">Typical range: 5-80 kg/ha</small>
                    </div>
                    <div class="form-group">
                        <label for="potassium">Potassium (K) - kg/ha</label>
                        <input type="number" id="potassium" name="potassium" 
                               min="0" max="150" step="0.1" required
                               placeholder="e.g., 43">
                        <small style="color: #666;">Typical range: 5-80 kg/ha</small>
                    </div>
                </div>

                <!-- Environmental Conditions -->
                <h3 style="color: var(--primary-color); margin: 2rem 0 1rem;">Environmental Conditions</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="temperature">Temperature - Â°C</label>
                        <input type="number" id="temperature" name="temperature" 
                               min="0" max="50" step="0.1" required
                               placeholder="e.g., 25.5">
                        <small style="color: #666;">Average temperature in Â°C</small>
                    </div>
                    <div class="form-group">
                        <label for="humidity">Humidity - %</label>
                        <input type="number" id="humidity" name="humidity" 
                               min="0" max="100" step="0.1" required
                               placeholder="e.g., 80">
                        <small style="color: #666;">Relative humidity percentage</small>
                    </div>
                </div>

                <!-- Soil & Rainfall -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="ph">Soil pH</label>
                        <input type="number" id="ph" name="ph" 
                               min="0" max="14" step="0.1" required
                               placeholder="e.g., 6.5">
                        <small style="color: #666;">pH scale: 0-14 (neutral = 7)</small>
                    </div>
                    <div class="form-group">
                        <label for="rainfall">Rainfall - mm</label>
                        <input type="number" id="rainfall" name="rainfall" 
                               min="0" max="3000" step="0.1" required
                               placeholder="e.g., 200">
                        <small style="color: #666;">Annual rainfall in millimeters</small>
                    </div>
                </div>

                <!-- Submit Buttons -->
                <div class="form-row" style="margin-top: 2rem;">
                    <button type="submit" class="btn btn-primary btn-block">
                        Get Crop Recommendation
                    </button>
                    <button type="button" class="btn btn-secondary btn-block" 
                            onclick="resetForm('crop-form')">
                        Reset Form
                    </button>
                </div>
            </form>
        </div>

        <!-- Loading Indicator -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p style="margin-top: 1rem;">Analyzing your data...</p>
        </div>

        <!-- Results Section -->
        <div id="results" class="results">
            <!-- Main Recommendation -->
            <div class="result-header">
                <h3>Recommended Crop</h3>
                <div style="font-size: 3rem; font-weight: bold; margin-top: 1rem;">
                    <span id="recommended-crop">-</span>
                </div>
            </div>

            <!-- Top 3 Recommendations -->
            <div class="result-content">
                <h3 style="margin-bottom: 1rem;">Top Crop Recommendations</h3>
                <div id="recommendations" class="recommendations">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Input Parameters Summary -->
            <div class="result-content">
                <h3 style="margin-bottom: 1rem;">Your Input Parameters</h3>
                <div id="input-parameters" class="result-grid">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Agricultural Advice -->
            <div class="result-content">
                <h3 style="margin-bottom: 1rem;">Agricultural Advice</h3>
                <ul id="advice" class="advice-list">
                    <!-- Dynamically populated -->
                </ul>
            </div>
        </div>

        <!-- Information Card -->
        <div class="card mt-2">
            <h3>ðŸ’¡ How to Use This Tool</h3>
            <ul class="advice-list">
                <li><strong>Soil Testing:</strong> Get your soil tested at a local agricultural office for accurate NPK values and pH levels.</li>
                <li><strong>Climate Data:</strong> Use average temperature and humidity values for your region during the growing season.</li>
                <li><strong>Rainfall:</strong> Enter the total annual rainfall for your area in millimeters.</li>
                <li><strong>Multiple Options:</strong> The system provides multiple crop recommendations with confidence scores to help you choose.</li>
                <li><strong>Local Expertise:</strong> Combine these AI recommendations with local agricultural knowledge for best results.</li>
            </ul>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2024 Smart Agriculture Decision Support System. Built with AI & ML.</p>
        <p>Empowering farmers through technology</p>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
